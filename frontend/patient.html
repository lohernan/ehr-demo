<!doctype html>
<html>
<head><meta charset="utf-8"><title>Patient - EHR Demo</title><link rel="stylesheet" href="css/style.css"></head>
<body>
<div class="container">
  <h2>Patient Portal</h2>
  <button id="load">Load my history</button>
  <div id="history"></div>
</div>

<script src="js/app.js"></script>
<script>
  async function loadHistory(){
    const user = JSON.parse(localStorage.getItem('user') || '{}');
    // For demo, assume patient user.id corresponds to patient id 1
    const id = 1;
    const res = await getPatientHistory(id);
    const div = document.getElementById('history');
    div.innerHTML = '<h3>Vitals</h3>' + JSON.stringify(res.vitals, null, 2) + '<h3>Prescriptions</h3>' + JSON.stringify(res.prescriptions, null, 2);
  }
  document.getElementById('load').addEventListener('click', loadHistory);
</script>
</body>
</html>
